<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Publish an updated data package — publish_update • arcticdatautils</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Publish an updated data package — publish_update" />
<meta property="og:description" content="Publish an update to a data package after updating data files or metadata." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">arcticdatautils</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/a-overview.html">Overview</a>
    </li>
    <li>
      <a href="../articles/b-basic-usage.html">Basic Usage</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/NCEAS/arcticdatautils">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Publish an updated data package</h1>
    <small class="dont-index">Source: <a href='https://github.com/NCEAS/arcticdatautils/blob/master/R/editing.R'><code>R/editing.R</code></a></small>
    <div class="hidden name"><code>publish_update.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Publish an update to a data package after updating data files or metadata.</p>
    </div>

    <pre class="usage"><span class='fu'>publish_update</span><span class='op'>(</span>
  <span class='va'>mn</span>,
  <span class='va'>metadata_pid</span>,
  <span class='va'>resource_map_pid</span>,
  data_pids <span class='op'>=</span> <span class='cn'>NULL</span>,
  child_pids <span class='op'>=</span> <span class='cn'>NULL</span>,
  metadata_path <span class='op'>=</span> <span class='cn'>NULL</span>,
  identifier <span class='op'>=</span> <span class='cn'>NULL</span>,
  use_doi <span class='op'>=</span> <span class='cn'>FALSE</span>,
  parent_resmap_pid <span class='op'>=</span> <span class='cn'>NULL</span>,
  parent_metadata_pid <span class='op'>=</span> <span class='cn'>NULL</span>,
  parent_data_pids <span class='op'>=</span> <span class='cn'>NULL</span>,
  parent_child_pids <span class='op'>=</span> <span class='cn'>NULL</span>,
  public <span class='op'>=</span> <span class='cn'>TRUE</span>,
  check_first <span class='op'>=</span> <span class='cn'>TRUE</span>,
  format_id <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>mn</th>
      <td><p>(MNode) The Member Node to update the object on.</p></td>
    </tr>
    <tr>
      <th>metadata_pid</th>
      <td><p>(character) The PID of the EML metadata document to be updated.</p></td>
    </tr>
    <tr>
      <th>resource_map_pid</th>
      <td><p>(character)  The PID of the resource map for the package.</p></td>
    </tr>
    <tr>
      <th>data_pids</th>
      <td><p>(character)  PID(s) of data objects that will go in the updated package.</p></td>
    </tr>
    <tr>
      <th>child_pids</th>
      <td><p>(character) Optional. Child packages resource map PIDs.</p></td>
    </tr>
    <tr>
      <th>metadata_path</th>
      <td><p>(character or eml) Optional. An eml class object or a path to a metadata file to update with.
If this is not set, the existing metadata document will be used.</p></td>
    </tr>
    <tr>
      <th>identifier</th>
      <td><p>(character) Manually specify the identifier for the new metadata object.</p></td>
    </tr>
    <tr>
      <th>use_doi</th>
      <td><p>(logical) Generate and use a DOI as the identifier for the updated metadata object.</p></td>
    </tr>
    <tr>
      <th>parent_resmap_pid</th>
      <td><p>(character)  Optional. PID of a parent package to be updated.
Not optional if a parent package exists.</p></td>
    </tr>
    <tr>
      <th>parent_metadata_pid</th>
      <td><p>(character)  Optional. Identifier for the metadata document of the parent package.
Not optional if a parent package exists.</p></td>
    </tr>
    <tr>
      <th>parent_data_pids</th>
      <td><p>(character)  Optional. Identifier for the data objects of the parent package.
Not optional if the parent package contains data objects.</p></td>
    </tr>
    <tr>
      <th>parent_child_pids</th>
      <td><p>(character) Optional. Resource map identifier(s) of child packages in the parent package.
<code>resource_map_pid</code> should not be included. Not optional if the parent package contains other child packages.</p></td>
    </tr>
    <tr>
      <th>public</th>
      <td><p>(logical) Optional. Make the update public. If <code>FALSE</code>, will set the metadata and resource map to private (but not the data objects).
This applies to the new metadata PID and its resource map and data object.
access policies are not affected.</p></td>
    </tr>
    <tr>
      <th>check_first</th>
      <td><p>(logical) Optional. Whether to check the PIDs passed in as arguments exist on the MN before continuing.
Checks that objects exist and are of the right format type. This speeds up the function, especially when <code>data_pids</code> has many elements.</p></td>
    </tr>
    <tr>
      <th>format_id</th>
      <td><p>(character) Optional. When omitted, the updated object will have the same formatId as <code>metadata_pid</code>. If set, will attempt
to use the value instead.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>(character) Named character vector of PIDs in the data package, including PIDs for the metadata, resource map, and data objects.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function can be used for a variety of tasks:</p>
<ul>
<li><p>Publish an existing package with a DOI</p></li>
<li><p>Update a package with new data objects</p></li>
<li><p>Update a package with new metadata</p></li>
</ul>

<p>The metadata_pid and resource_map_pid provide the identifier of an EML metadata
document and associated resource map, and the data_pids vector provides a list
of PIDs of data objects in the package.  Update the metadata file and resource map
by generating a new identifier (a DOI if <code>use_doi = TRUE</code>) and updating the Member
Node with a public version of the object.  If metadata_file is not missing, it
should be an edited version of the metadata to be used to update the original. If
parent_resmap_pid is not missing, it indicates the PID of a parent package that
should be updated as well, using the parent_metadata_pid, parent_data_pids, and
parent_child_pids as members of the updated package. In all cases, the objects
are made publicly readable.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='va'>cn</span> <span class='op'>&lt;-</span> <span class='fu'>CNode</span><span class='op'>(</span><span class='st'>"STAGING2"</span><span class='op'>)</span>
<span class='va'>mn</span> <span class='op'>&lt;-</span> <span class='fu'>getMNode</span><span class='op'>(</span><span class='va'>cn</span>,<span class='st'>"urn:node:mnTestKNB"</span><span class='op'>)</span>

<span class='va'>rm_pid</span> <span class='op'>&lt;-</span> <span class='st'>"resource_map_urn:uuid:23c7cae4-0fc8-4241-96bb-aa8ed94d71fe"</span>
<span class='va'>meta_pid</span> <span class='op'>&lt;-</span> <span class='st'>"urn:uuid:23c7cae4-0fc8-4241-96bb-aa8ed94d71fe"</span>
<span class='va'>data_pids</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"urn:uuid:3e5307c4-0bf3-4fd3-939c-112d4d11e8a1"</span>,
<span class='st'>"urn:uuid:23c7cae4-0fc8-4241-96bb-aa8ed94d71fe"</span><span class='op'>)</span>

<span class='va'>meta_path</span> <span class='op'>&lt;-</span> <span class='st'>"/home/Documents/myMetadata.xml"</span>

<span class='fu'>publish_update</span><span class='op'>(</span><span class='va'>mn</span>, <span class='va'>meta_pid</span>, <span class='va'>rm_pid</span>, <span class='va'>data_pids</span>, <span class='va'>meta_path</span>, public <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Bryce Mecum.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


